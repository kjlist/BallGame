<!--question01有点问题,paddle无法获取this.game.gameImage-->
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>game 1</title>
    <style media="screen">
        canvas {
            border: 1px black solid;
        }
    </style>
    <script src='utils.js'></script>
    <script src='gua_game.js'></script>
    <script src='scene/base_scene.js'></script>

    <script src='scene/main/scene_main.js'></script>
    <script src='scene/main/paddle.js'></script>
    <script src='scene/main/ball.js'></script>

    <script src='scene/title/scene_title.js'></script>
</head>
<body>
<canvas id="id-canvas" width="400" height="300"></canvas>
<script>
    var _main = function () {
        window.fps = 30
        //完成先加载图片,然后开启游戏循环功能
        var namePath = {
            paddle:'img/paddle.png',
            ball:'img/ball.png',
        }

        // 可以吧gameImage放到Guagame里面,方便管理,外面留一个namePath作为可配置的
        var gameImage = {}
        var loads = []
        var actions = Object.keys(namePath)
        for (let i = 0; i < actions.length; i++) {
            let img = new Image()
            img.src = namePath[actions[i]]
            img.onload = function () {
                log('加载完毕',i,actions[i],img)
                gameImage[actions[i]] = img
                loads.push(1)
                if (loads.length == 2){
                    //开始
                    log('全部加载完成',gameImage)
                    var g = GuaGame.new(gameImage)
                    //初始化最开始的场景
                }
            }
        }
    }
    _main()
</script>
</body>
</html>
